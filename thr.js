(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function THR(){return this instanceof THR?(this._addr="https://znbtd4y5ii.execute-api.us-east-1.amazonaws.com/prod/",this._size=10,this._user=null,void(this._sel=null)):new THR}function key(e){return"thr:"+e}var request=require("superagent"),LRU=require("storage-lru").StorageLRU,asyncify=require("storage-lru").asyncify,cache=new LRU(asyncify(localStorage));THR.prototype.user=function(e){return this._user=e,this},THR.prototype.sel=function(e){return this._sel=e,this},THR.prototype.size=function(e){return this._size=e,this},THR.prototype.fetch=function(e){e||(e=function(){});var t=this;cache.getItem(key(t._user),{json:!0},function(r,s){return s?(t.setImgs(s),e(s)):void request.post(t._addr).send({username:t._user}).end(function(r,s){return r?e(r):(cache.setItem(key(t._user),s.body,{json:!0,cacheControl:"max-age=86400"}),t.setImgs(s.body),void e(s.body))})})},THR.prototype.setImgs=function(e){var t=document.querySelector(this._sel);e=e.slice(0,this._size),e.forEach(function(e){var r=document.createElement("img");r.src=e.icon,t.appendChild(r)})},module.exports=window.THR=THR;
},{"storage-lru":3,"superagent":8}],2:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],3:[function(require,module,exports){
module.exports={StorageLRU:require("./src/StorageLRU"),asyncify:require("./src/asyncify")};

},{"./src/StorageLRU":6,"./src/asyncify":7}],4:[function(require,module,exports){
(function (process){
function nextTick(n){"function"==typeof setImmediate?setImmediate(n):process.nextTick(n)}module.exports=function(n,t,e){if(e=e||function(){},!Array.isArray(n)||!n.length)return e();var i=0,c=function(){t(n[i],function(t){t?(e(t),e=function(){}):(++i,i>=n.length?e():nextTick(c))})};c()};

}).call(this,require('_process'))
},{"_process":2}],5:[function(require,module,exports){
(function (process,global){
!function(e,t){"use strict";function n(e){return d[g]=a.apply(t,e),g++}function a(e){var n=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(t,n):new Function(""+e)()}}function s(e){if(p)setTimeout(a(s,e),0);else{var t=d[e];if(t){p=!0;try{t()}finally{o(e),p=!1}}}}function o(e){delete d[e]}function r(){m=function(){var e=n(arguments);return process.nextTick(a(s,e)),e}}function i(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",a=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),m=function(){var a=n(arguments);return e.postMessage(t+a,"*"),a}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;s(t)},m=function(){var t=n(arguments);return e.port2.postMessage(t),t}}function f(){var e=v.documentElement;m=function(){var t=n(arguments),a=v.createElement("script");return a.onreadystatechange=function(){s(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a),t}}function l(){m=function(){var e=n(arguments);return setTimeout(a(s,e),0),e}}if(!e.setImmediate){var m,g=1,d={},p=!1,v=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?r():i()?c():e.MessageChannel?u():v&&"onreadystatechange"in v.createElement("script")?f():l(),y.setImmediate=m,y.clearImmediate=o}}("undefined"==typeof self?"undefined"==typeof global?this:global:self);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":2}],6:[function(require,module,exports){
"use strict";function isDefined(e){return void 0!==e}function getIntegerOrDefault(e,r){return"number"!=typeof e||e%1!==0?r:e}function cloneError(e,r){var t=e.message;return r&&(t+=": "+r),{code:e.code,message:t}}function merge(){for(var e={},r=0,t=arguments.length;t>r;r++){var o=arguments[r];for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e}function nowInSec(){return Math.floor((new Date).getTime()/1e3)}function defaultPurgeComparator(e,r){if(e.bad!==r.bad)return e.bad?-1:1;var t=nowInSec(),o=t>=e.expires+e.stale,a=t>=r.expires+r.stale;return o!==a?o?-1:1:e.priority!==r.priority?e.priority>r.priority?-1:1:e.access!==r.access?e.access<r.access?-1:1:e.size>r.size?-1:e.size===r.size?0:1}function Meta(e,r,t){this.storage=e,this.parser=r,this.options=t||{},this.records=[]}function Parser(){}function Stats(e){this.hit=0,this.miss=0,this.stale=0,this.error=0,this.revalidateSuccess=0,this.revalidateFailure=0}function StorageLRU(e,r){var t=this;r=r||{};r.onInit;t.options={},t.options.recheckDelay=isDefined(r.recheckDelay)?r.recheckDelay:-1,t.options.keyPrefix=r.keyPrefix||DEFAULT_KEY_PREFIX,t.options.purgeLoadIncrease=getIntegerOrDefault(r.purgeLoadIncrease,DEFAULT_PURGE_LOAD_INCREASE),t.options.maxPurgeAttempts=getIntegerOrDefault(r.maxPurgeAttempts,DEFAULT_PURGE_ATTEMPTS),t.options.purgedFn=r.purgedFn;var o={keyPrefix:t.options.keyPrefix};t._storage=e,t._purgeComparator=r.purgeComparator||defaultPurgeComparator,t._revalidateFn=r.revalidateFn,t._parser=new Parser,t._meta=new Meta(t._storage,t._parser,o),t._stats=new Stats,t._enabled=!0}var ERR_DISABLED={code:1,message:"disabled"},ERR_DESERIALIZE={code:2,message:"cannot deserialize"},ERR_SERIALIZE={code:3,message:"cannot serialize"},ERR_CACHECONTROL={code:4,message:"bad cacheControl"},ERR_INVALIDKEY={code:5,message:"invalid key"},ERR_NOTENOUGHSPACE={code:6,message:"not enough space"},ERR_REVALIDATE={code:7,message:"revalidate failed"},MAX_AGE="max-age",STALE_WHILE_REVALIDATE="stale-while-revalidate",DEFAULT_KEY_PREFIX="",DEFAULT_PRIORITY=3,DEFAULT_PURGE_LOAD_INCREASE=500,DEFAULT_PURGE_ATTEMPTS=2,CUR_VERSION="1",asyncEachSeries=require("async-each-series");require("setimmediate"),Meta.prototype.getMetaFromItem=function(e,r){var t;try{t=this.parser.parse(r).meta,t.key=e}catch(o){t={key:e,bad:!0,size:r.length}}return t},Meta.prototype.updateMetaRecord=function(e,r){var t=this;t.storage.getItem(e,function(o,a){o||t.records.push(t.getMetaFromItem(e,a)),r&&r()})},Meta.prototype.generateRecordsHash=function(){var e=this,r={};return e.records.forEach(function(e){r[e.key]=!0}),r},Meta.prototype.init=function(e,r){var t=this,o=t.storage,a=t.options.keyPrefix,s=0;return 0>=e?void(r&&r()):void o.keys(e,function(e,o){var i=o.length;if(0>=i)return void(r&&r());var n=t.generateRecordsHash();o.forEach(function(e){n[e]||a&&0!==e.indexOf(a)?(s+=1,s===i&&r&&r()):t.updateMetaRecord(e,function(){s+=1,n[e]=!0,s===i&&r&&r()})})})},Meta.prototype.sort=function(e){this.records.sort(e)},Meta.prototype.update=function(e,r){for(var t=0,o=this.records.length;o>t;t++){var a=this.records[t];if(a.key===e)return a.bad=!1,this.records[t]=merge(a,r),this.records[t]}return r=merge(r,{key:e}),this.records.push(r),r},Meta.prototype.remove=function(e){for(var r=0,t=this.records.length;t>r;r++)if(this.records[r].key===e)return void this.records.splice(r,1)},Meta.prototype.numRecords=function(){return this.records.length},Parser.prototype.format=function(e,r){if(e&&e.access>0&&e.expires>0&&e.stale>=0&&e.priority>0&&e.maxAge>0)return"["+[CUR_VERSION,e.access,e.expires,e.maxAge,e.stale,e.priority].join(":")+"]"+r;throw new Error("invalid meta")},Parser.prototype.parse=function(e){var r=e&&e.indexOf("]");if(!r)throw new Error("missing meta");var t=e.substring(1,r).split(":");if(6!==t.length)throw new Error("invalid number of meta fields");if(t={version:t[0],access:parseInt(t[1],10),expires:parseInt(t[2],10),maxAge:parseInt(t[3],10),stale:parseInt(t[4],10),priority:parseInt(t[5],10),size:e.length},isNaN(t.access)||isNaN(t.expires)||isNaN(t.maxAge)||isNaN(t.stale)||t.access<=0||t.expires<=0||t.maxAge<=0||t.stale<0||t.priority<=0)throw new Error("invalid meta fields");return{meta:t,value:e.substring(r+1)}},Stats.prototype.toJSON=function(){var e={hit:this.hit,miss:this.miss,stale:this.stale,error:this.error,revalidateSuccess:this.revalidateSuccess,revalidateFailure:this.revalidateFailure};return e},StorageLRU.prototype.stats=function(){return this._stats.toJSON()},StorageLRU.prototype.keys=function(e,r){return this._storage.keys(e,r)},StorageLRU.prototype.getItem=function(e,r,t){if(!e)return void(t&&t(cloneError(ERR_INVALIDKEY,e)));var o=this,a=o._prefix(e);o._storage.getItem(a,function(s,i){if(s||null===i||void 0===i)return o._stats.miss++,o._meta.remove(a),void t(cloneError(ERR_INVALIDKEY,e));var n;try{n=o._deserialize(i,r)}catch(c){return o._stats.error++,void t(cloneError(ERR_DESERIALIZE,c.message))}var u=n.meta,p=nowInSec();if(u.expires+u.stale<p)return o._stats.miss++,o.removeItem(e),void t();o._stats.hit++;try{u.access=p;var E=o._serialize(n.value,u,r);o._storage.setItem(a,E,function(e){e||(u=o._meta.update(a,u))})}catch(d){}var l=u.expires<p;if(l){o._stats.stale++;try{o._revalidate(e,u,{json:!(!r||!r.json)})}catch(d){}}t(null,n.value,{isStale:l})})},StorageLRU.prototype._revalidate=function(e,r,t,o){var a=this;return"function"!=typeof a._revalidateFn?void(o&&o()):void a._revalidateFn(e,function(s,i){if(s)return a._stats.revalidateFailure++,void(o&&o(cloneError(ERR_REVALIDATE,s.message)));try{var n=nowInSec(),c={access:r.access,maxAge:r.maxAge,expires:n+r.maxAge,stale:r.stale,priority:r.priority},u=a._serialize(i,c,t),p=a._prefix(e);a._storage.setItem(p,u,function(e){e?a._stats.revalidateFailure++:(c.size=u.length,a._meta.update(p,c),a._stats.revalidateSuccess++)})}catch(E){return a._stats.revalidateFailure++,void(o&&o(cloneError(ERR_REVALIDATE,E.message)))}o&&o()})},StorageLRU.prototype.setItem=function(e,r,t,o){if(!e)return void(o&&o(cloneError(ERR_INVALIDKEY,e)));var a=this;if(!a._enabled)return void(o&&o(cloneError(ERR_DISABLED)));var s=a._parseCacheControl(t&&t.cacheControl);if(s["no-cache"]||s["no-store"]||!s[MAX_AGE]||s[MAX_AGE]<=0)return void(o&&o(cloneError(ERR_CACHECONTROL)));var i,n=nowInSec(),c=t&&t.priority||DEFAULT_PRIORITY,u={expires:n+s[MAX_AGE],maxAge:s[MAX_AGE],stale:s[STALE_WHILE_REVALIDATE]||0,priority:c,access:n};try{i=a._serialize(r,u,t)}catch(p){return void(o&&o(cloneError(ERR_SERIALIZE)))}var E=a._prefix(e);a._storage.setItem(E,i,function(e){return e?void a.keys(1,function(e,r){if(0===r.length)return a._markAsDisabled(),void(o&&o(cloneError(ERR_DISABLED)));var t=i.length;a.purge(t,function(e){return e?void(o&&o(cloneError(ERR_NOTENOUGHSPACE))):void a._storage.setItem(E,i,function(e){e?o&&o(cloneError(ERR_NOTENOUGHSPACE)):(a._meta.update(E,u),o&&o())})})}):(u.size=i.length,a._meta.update(E,u),void(o&&o()))})},StorageLRU.prototype.removeItem=function(e,r){if(!e)return void(r&&r(cloneError(ERR_INVALIDKEY,e)));var t=this;e=t._prefix(e),t._storage.removeItem(e,function(o){return o?void(r&&r(cloneError(ERR_INVALIDKEY,e))):(t._meta.remove(e),void(r&&r()))})},StorageLRU.prototype._parseCacheControl=function(e){var r={};if(e){for(var t=e.toLowerCase().split(","),o=0,a=t.length;a>o;o++){var s=t[o].split("=");2===s.length?r[s[0]]=s[1]:1===s.length&&(r[s[0]]=!0)}r[MAX_AGE]&&(r[MAX_AGE]=parseInt(r[MAX_AGE],10)||0),r[STALE_WHILE_REVALIDATE]&&(r[STALE_WHILE_REVALIDATE]=parseInt(r[STALE_WHILE_REVALIDATE],10)||0)}return r},StorageLRU.prototype._prefix=function(e){return this.options.keyPrefix+e},StorageLRU.prototype._deprefix=function(e){var r=this.options.keyPrefix;return r?e.substring(r.length):e},StorageLRU.prototype._markAsDisabled=function(){var e=this;e._enabled=!1;var r=e.options.recheckDelay;r>0&&setTimeout(function(){e._enabled=!0},r)},StorageLRU.prototype._serialize=function(e,r,t){var o=t&&t.json?JSON.stringify(e):e;return this._parser.format(r,o)},StorageLRU.prototype._deserialize=function(e,r){var t=this._parser.parse(e);return{meta:t.meta,value:r.json?JSON.parse(t.value):t.value}},StorageLRU.prototype.purge=function(e,r){for(var t=this,o=Math.max(0,t.options.purgeFactor)||1,a=Math.round(e*o),s={purged:[],recordsToRemove:[],size:e+a},i=[],n=0;n<t.options.maxPurgeAttempts;n++)i.push((n+1)*t.options.purgeLoadIncrease);asyncEachSeries(i,function(e,r){s.recordsToRemove=[],s.purged=[],t._meta.init(e,function(){t._meta.sort(t._purgeComparator),asyncEachSeries(t._meta.records,function(e,r){e.remove=!0,s.purged.push(t._deprefix(e.key)),t._storage.removeItem(e.key,function(t){t||(s.size=s.size-e.size),s.size>0?r():r(!0)})},function(e){t._meta.records=t._meta.records.filter(function(e){return e.remove!==!0});var o=t.options.purgedFn,i=s.purged;o&&i.length>0&&setImmediate(function(){o(i)}),s.size<=a?r(!0):r()})})},function(){r&&(s.size<=a?r():r(new Error("still need "+(s.size-a))))})},module.exports=StorageLRU;

},{"async-each-series":4,"setimmediate":5}],7:[function(require,module,exports){
function asyncify(e){var t={getItem:function(t,n){n(null,e.getItem(t))},setItem:function(t,n,u){try{e.setItem(t,n)}catch(o){return void u(o)}u(null,n)},removeItem:function(t,n){e.removeItem(t),n()}};return e.keys||"number"!=typeof e.length||(t.keys=function(t,n){for(var u=[],o=t>e.length?e.length:t,r=0,l=o;l>r;r++)u.push(e.key(r));n(null,u)}),t}module.exports=asyncify;

},{}],8:[function(require,module,exports){
function noop(){}function isHost(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function isObject(t){return t===Object(t)}function serialize(t){if(!isObject(t))return t;var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function parseString(t){for(var e,r,s={},i=t.split("&"),o=0,n=i.length;n>o;++o)r=i[o],e=r.split("="),s[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return s}function parseHeader(t){var e,r,s,i,o=t.split(/\r?\n/),n={};o.pop();for(var u=0,a=o.length;a>u;++u)r=o[u],e=r.indexOf(":"),s=r.slice(0,e).toLowerCase(),i=trim(r.slice(e+1)),n[s]=i;return n}function type(t){return t.split(/ *; */).shift()}function params(t){return reduce(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),s=r.shift(),i=r.shift();return s&&i&&(t[s]=i),t},{})}function Response(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(t,e){var r=this;Emitter.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new Response(r)}catch(s){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=s,r.callback(t)}if(r.emit("response",e),t)return r.callback(t,e);if(e.status>=200&&e.status<300)return r.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,r.callback(i,e)})}function request(t,e){return"function"==typeof e?new Request("GET",t).end(e):1==arguments.length?new Request("GET",t):new Request(t,e)}var Emitter=require("emitter"),reduce=require("reduce"),root;root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var trim="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(t){return this.header[t.toLowerCase()]},Response.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=type(e);var r=params(e);for(var s in r)this[s]=r[s]},Response.prototype.parse=function(t){return this.parser=t,this},Response.prototype.parseBody=function(t){var e=this.parser||request.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},Response.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},Response.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,s="cannot "+e+" "+r+" ("+this.status+")",i=new Error(s);return i.status=this.status,i.method=e,i.url=r,i},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(t){return t(this),this},Request.prototype.timeout=function(t){return this._timeout=t,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(t,e){if(isObject(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},Request.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},Request.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},Request.prototype.type=function(t){return this.set("Content-Type",request.types[t]||t),this},Request.prototype.accept=function(t){return this.set("Accept",request.types[t]||t),this},Request.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},Request.prototype.query=function(t){return"string"!=typeof t&&(t=serialize(t)),t&&this._query.push(t),this},Request.prototype.field=function(t,e){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e),this},Request.prototype.attach=function(t,e,r){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e,r),this},Request.prototype.send=function(t){var e=isObject(t),r=this.getHeader("Content-Type");if(e&&isObject(this._data))for(var s in t)this._data[s]=t[s];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||isHost(t)?this:(r||this.type("json"),this)},Request.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),r(t,e)},Request.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},Request.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(t){var e=this,r=this.xhr=request.getXHR(),s=this._query.join("&"),i=this._timeout,o=this._formData||this._data;this._callback=t||noop,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(s){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(r.onprogress=n);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=n)}catch(u){}if(i&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},i)),s&&(s=request.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!isHost(o)){var a=this.getHeader("Content-Type"),h=request.serialize[a?a.split(";")[0]:""];h&&(o=h(o))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this.emit("request",this),r.send(o),this},Request.prototype.then=function(t,e){return this.end(function(r,s){r?e(r):t(s)})},request.Request=Request,request.get=function(t,e,r){var s=request("GET",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},request.head=function(t,e,r){var s=request("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.del=function(t,e){var r=request("DELETE",t);return e&&r.end(e),r},request.patch=function(t,e,r){var s=request("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.post=function(t,e,r){var s=request("POST",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.put=function(t,e,r){var s=request("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},module.exports=request;

},{"emitter":9,"reduce":10}],9:[function(require,module,exports){
function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};

},{}],10:[function(require,module,exports){
module.exports=function(l,n,e){for(var r=0,t=l.length,u=3==arguments.length?e:l[r++];t>r;)u=n.call(null,u,l[r],++r,l);return u};

},{}]},{},[1]);
